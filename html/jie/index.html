 
 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>基于 layui 的极简社区页面模版</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="java,编程交流社区">
  <meta name="description" content="java,编程交流社区,襄阳人本地的编程社区">
  <link rel="stylesheet" href="/res/layui/css/layui.css">
  <link rel="stylesheet" href="/res/css/global.css">
</head>
<body>

<div class="fly-header layui-bg-black">
  <div class="layui-container">
    <a class="fly-logo" href="/">
      <img src="/res/images/logo.png" alt="layui">猿圈社区
    </a>
    <ul class="layui-nav fly-nav layui-hide-xs">
      <li class="layui-nav-item">
        <a href="https://space.bilibili.com/384704339" target="_blank"><i class="iconfont icon-jiaoliu"></i>交流</a>
      </li>
      <li class="layui-nav-item">
        <a href="/case/case.html"><i class="iconfont icon-iconmingxinganli"></i>精华</a>
      </li>
      <li class="layui-nav-item">
        <a href="/address.html" target="_blank"><i class="iconfont icon-ui"></i>地址</a>
      </li>
    </ul>
    
    <ul class="layui-nav fly-nav-user">
      
      <!-- 未登入的状态 -->
      <li class="layui-nav-item">
        <a class="iconfont icon-touxiang layui-hide-xs" href="/user/login.html"></a>
      </li>
      <li class="layui-nav-item">
        <a href="/user/login.html">登入</a>
      </li>
      <li class="layui-nav-item">
        <a href="/user/reg.html">注册</a>
      </li>
      <li class="layui-nav-item layui-hide-xs">
        <a href="/app/qq/" onclick="layer.msg('正在通过QQ登入', {icon:16, shade: 0.1, time:0})" title="QQ登入" class="iconfont icon-qq"></a>
      </li>
      <li class="layui-nav-item layui-hide-xs">
        <a href="/app/weibo/" onclick="layer.msg('正在通过微博登入', {icon:16, shade: 0.1, time:0})" title="微博登入" class="iconfont icon-weibo"></a>
      </li>
      
      <!-- 登入后的状态 -->
      <!--
      <li class="layui-nav-item">
        <a class="fly-nav-avatar" href="javascript:;">
          <cite class="layui-hide-xs">贤心</cite>
          <i class="iconfont icon-renzheng layui-hide-xs" title="认证信息：layui 作者"></i>
          <i class="layui-badge fly-badge-vip layui-hide-xs">VIP3</i>
          <img src="https://tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg">
        </a>
        <dl class="layui-nav-child">
          <dd><a href="/user/set.html"><i class="layui-icon">&#xe620;</i>基本设置</a></dd>
          <dd><a href="/user/message.html"><i class="iconfont icon-tongzhi" style="top: 4px;"></i>我的消息</a></dd>
          <dd><a href="/user/home.html"><i class="layui-icon" style="margin-left: 2px; font-size: 22px;">&#xe68e;</i>我的主页</a></dd>
          <hr style="margin: 5px 0;">
          <dd><a href="" style="text-align: center;">退出</a></dd>
        </dl>
      </li>
      -->
    </ul>
  </div>
</div>

<div class="fly-panel fly-column">
  <div class="layui-container">
    <ul class="layui-clear">
      <li class="layui-hide-xs"><a href="/">首页</a></li>
      <li class="layui-this"><a href="">后端</a></li>
      <li><a href="">前端</a></li>
      <li><a href="">数据</a></li>
      <li><a href="">综合</a></li>
      <li><a href="">公告</a></li>
      <li><a href="/timeLine.html">日志</a></li>
      <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><span class="fly-mid"></span></li> 
      
      <!-- 用户登入后显示 -->
      <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><a href="../user/index.html">我发表的贴</a></li> 
      <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><a href="../user/index.html#collection">我收藏的贴</a></li> 
    </ul> 
    
    <div class="fly-column-right layui-hide-xs"> 
      <span class="fly-search"><i class="layui-icon"></i></span> 
      <a href="add.html" class="layui-btn">发表新帖</a> 
    </div> 
    <div class="layui-hide-sm layui-show-xs-block" style="margin-top: -10px; padding-bottom: 10px; text-align: center;"> 
      <a href="add.html" class="layui-btn">发表新帖</a> 
    </div> 
  </div>
</div>

<div class="layui-container">
  <div class="layui-row layui-col-space15">
    <div class="layui-col-md8">
      <div class="fly-panel" style="margin-bottom: 0;">
        
        <div class="fly-panel-title fly-filter" style="overflow: hidden">
          <a id="all_data" href="javascript:changeState('all_data')" class="layui-this">综合</a>
          <span class="fly-mid"></span>
          <a id="in_open" href="javascript:changeState('in_open')">未结</a>
          <span class="fly-mid"></span>
          <a id="in_close" href="javascript:changeState('in_close')">已结</a>
          <span class="fly-mid"></span>
          <a id="is_essence" href="javascript:changeState('is_essence')">精华</a>

          <span class="fly-mid"></span>
            <select class="customselect" onchange="selectType(this)" id="datatype">
              <option value="java">java</option>
              <option value="python">python</option>
              <option value="others">others</option>
            </select>


          <span class="fly-filter-right layui-hide-xs">
            <a id="order_time" href="javascript:changeOrder('create_time')" class="layui-this">按最新</a>
            <span class="fly-mid"></span>
            <a id="order_reply" href="javascript:changeOrder('reply_number')">按热议</a>
          </span>
        </div>


        <ul class="fly-list" id="back_portData">
        </ul>
         <div id="back_portNone" class="fly-none">没有相关数据</div>
    
        <div style="text-align: center">
          <div class="laypage-main">
            <a id="homePaging" href="javascript:changePaging('homePaging')" data-id="1">首页</a>
            <a id="lastPaging" href="javascript:changePaging('lastPaging')">上一页</a>
            <a id="nextPaging" href="javascript:changePaging('nextPaging')" >下一页</a>
            <a id="endPaging" href="javascript:changePaging('endPaging')" >尾页</a>
            <a id="curPaging" title="当前页" href="javascript:changePaging('curPaging')"></a>
          </div>
        </div>

      </div>
    </div>
    <div class="layui-col-md4">
      <dl class="fly-panel fly-list-one">
        <dt class="fly-panel-title">置顶</dt>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>
        <dd>
          <a href="">基于 layui 的极简社区页面模版</a>
          <span><i class="iconfont icon-pinglun1"></i> 16</span>
        </dd>

        <!-- 无数据时 -->
        <!--
        <div class="fly-none">没有相关数据</div>
        -->
      </dl>

      <div class="fly-panel">
        <div class="fly-panel-title">
          合作区域
        </div>
        <div class="fly-panel-main">
          <a href="https://www.aliyun.com/minisite/goods?userCode=qyq0g4ub" target="_blank" class="fly-zanzhu">阿里云 - 服务器特惠</a>
        </div>
      </div>
      
      <div class="fly-panel fly-link">
        <h3 class="fly-panel-title">友情链接</h3>
        <dl class="fly-panel-main">
          <dd><a href="http://www.layui.com/" target="_blank">layui</a><dd>
          <dd><a href="http://layim.layui.com/" target="_blank">WebIM</a><dd>
          <dd><a href="http://layer.layui.com/" target="_blank">layer</a><dd>
          <dd><a href="http://www.layui.com/laydate/" target="_blank">layDate</a><dd>
        </dl>
      </div>

    </div>
  </div>
</div>

<div class="fly-footer">
  <p><a href="/">猿圈社区</a> 2020 &copy; <a href="http://www.kungreat.cn/" target="_blank">kungreat.cn 出品</a></p>
  <p>
    <a href="https://github.com/mydreams2018" target="_blank">GITHUB</a>
    <a href="http://www.beian.miit.gov.cn/" target="_blank">粤ICP备19055569号-1</a>
    <a href="http://www.layui.com/template/fly/" target="_blank">获取Fly社区模版</a>
  </p>
</div>

<script src="/res/layui/layui.js"></script>
<script>
  var datatype = document.getElementById("datatype").value;
  var portState;
  var isEssence;
  var orderType = 'create_time';
  var currentPage = 1;
layui.cache.page = 'jie';
layui.cache.user = {
  username: '游客'
  ,uid: -1
  ,avatar: '/res/images/avatar/00.jpg'
  ,experience: 83
  ,sex: '男'
};
layui.config({
  version: "3.0.0"
  ,base: '/res/mods/'
}).extend({
  fly: 'index'
}).use('fly',function(){
  getPortData();
});
function selectType(obj){
  datatype=obj.value;
  getPortData();
};
function changeState(value){
  layui.$("#all_data").removeClass('layui-this');
  layui.$("#in_open").removeClass('layui-this');
  layui.$("#in_close").removeClass('layui-this');
  layui.$("#is_essence").removeClass('layui-this');
  layui.$('#'+value).addClass('layui-this');
  portState=null;
  isEssence=null;
  switch (layui.$('#'+value).text()) {
    case '未结':
      portState='未结';
      break;
    case '已结':
      portState='已结';
      break;
    case '精华':
      isEssence=1;
  };
  getPortData();
};
function changeOrder(value) {
  layui.$("#order_time").removeClass('layui-this');
  layui.$("#order_reply").removeClass('layui-this');
  orderType = value;
  switch (value) {
    case 'create_time':
      layui.$("#order_time").addClass('layui-this');
      break;
    case 'reply_number':
      layui.$("#order_reply").addClass('layui-this');
      break;
  };
  getPortData();
};
function changePaging(obj){
  if(document.getElementById(obj).getAttribute("data-id") != currentPage) {
    currentPage = document.getElementById(obj).getAttribute("data-id");
    getPortData();
  }
};
function getPortData(){
  layui.$.ajax({
    url: "/api/report/queryReport",
    type: "post",
    dataType: "json",
    data: {
      'datatype':datatype,
      'portState':portState,
      'isEssence':isEssence,
      'orderType':orderType,
      'currentPage':currentPage,
      'classId':1
    },
    success: function (res) {
        if(res && res.datas.length > 0){
          layui.$("#back_portNone").addClass('layui-hide');
          layui.$("#back_portData").removeClass('layui-hide');
          layui.$("#back_portData").empty();
          for(var x=0;x<res.datas.length;x++){
            var resData = res.datas[x];
            var str = "<li>\n"+
                    "            <a href=\"/user/home.html?account={userAccount}\" class=\"fly-avatar\">\n" +
                    "              <img src=\"{userImg}\" alt=\"xx\">\n" +
                    "            </a>\n" +
                    "\t\t\t\n" +
                    "            <h2>\n" +
                    "              <a class=\"layui-badge\">分享</a>\n" +
                    "              <a href=\"/jie/detail.html?classId=1&id={portId}\">{portTitle}</a>\n" +
                    "            </h2>\n" +
                    "            <div class=\"fly-list-info\">\n" +
                    "              <a href=\"/user/home.html?account={userAccount}\" link>\n" +
                    "                <cite>{userAlias}</cite>\n";
                     if(resData.authenticate && resData.authenticate !=''){
                       str = str + "<i class=\"iconfont icon-renzheng\" title=\"认证信息：{authenticate}\"></i>\n"
                     };
                    if(resData.isVip){
                      str = str + "<i class=\"layui-badge fly-badge-vip\">{vipLevel}</i>\n"
                    };
                    str = str + "  </a>\n"
                            + "   <span>{createTime}</span>\n"
                            + "  \n"
                            +  "  <span class=\"fly-list-kiss layui-hide-xs\" title=\"悬赏飞吻\"><i class=\"iconfont icon-kiss\"></i> {experience}</span>\n"
                            +  "  <span class=\"layui-badge fly-badge-accept layui-hide-xs\">{portState}</span>\n"
                            +  " <span class=\"fly-list-nums\"> \n"
                            + "  <i class=\"iconfont icon-pinglun1\" title=\"回答\"></i> {replyNumber}\n"
                            +  "    </span>\n"
                            + " </div>\n";
                    if(resData.isTop || resData.isEssence){
                        if(resData.isTop){
                            str = str + "<div class=\"fly-list-badge\">\n" +
                                    "              <span class=\"layui-badge layui-bg-black\">置顶</span>\n" +
                                    "            </div>";
                        }else if(resData.isEssence){
                          str = str + "  <div class=\"fly-list-badge\">\n" +
                                   "           <span class=\"layui-badge layui-bg-red\">精帖</span>\n" +
                                   "            </div>";
                        }else{
                          str = str + " <div class=\"fly-list-badge\">\n" +
                                  "              <span class=\"layui-badge layui-bg-black\">置顶</span>\n" +
                                  "              <span class=\"layui-badge layui-bg-red\">精帖</span>\n" +
                                  "            </div>";
                        }
                    };
                    str = str +  "</li>";
                    var rt = str.replace(/{userAccount}/g,resData.userAccount).replace(/{userImg}/g,resData.userImg).replace(/{userAlias}/g,resData.alias)
                    .replace(/{portTitle}/g,resData.name).replace(/{portTitle}/g,resData.name).replace(/{portId}/g,resData.id)
                    .replace(/{authenticate}/g,resData.authenticate).replace(/{vipLevel}/g,resData.vipLevel)
                    .replace(/{createTime}/g,resData.createTime).replace(/{experience}/g,resData.experience)
                    .replace(/{portState}/g,resData.portState).replace(/{replyNumber}/g,resData.replyNumber);
                    document.getElementById("back_portData").appendChild(layui.$(rt)[0]);
          }
          document.getElementById("lastPaging").setAttribute("data-id",res.page.lastPage);
          document.getElementById("nextPaging").setAttribute("data-id",res.page.nextPage);
          document.getElementById("endPaging").setAttribute("data-id",res.page.endPage);
          document.getElementById("curPaging").innerText=res.page.currentPage+'/'+res.page.endPage;
          currentPage = res.page.currentPage;
        }else{
          layui.$("#back_portNone").removeClass('layui-hide');
          layui.$("#back_portData").addClass('layui-hide');
        }
    },
    error: function () {
      layui.$("#back_portNone").removeClass('layui-hide');
      layui.$("#back_portData").addClass('layui-hide');
    }
  });
};
</script>

</body>
</html>